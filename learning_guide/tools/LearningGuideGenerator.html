<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Untitled Page</title>  

    <script type="text/javascript">      

        var intTextBox = 0;       

        function addElement() {
            intTextBox++;
            var objNewDiv = document.createElement('div');
            objNewDiv.setAttribute('id', 'div_' + intTextBox);
            objNewDiv.innerHTML = 'Tab name ' + intTextBox + ': <input type="text" id="tb_' + intTextBox + '" name="tb_' + intTextBox + '"/>';
            document.getElementById('content').appendChild(objNewDiv);
        }

        function removeElement() {
            if (0 < intTextBox) {
                document.getElementById('content').removeChild(document.getElementById('div_' + intTextBox));
                intTextBox--;
            } else {
                alert("No textbox to remove");
            }
        }

        function generatefile() {
            //var textToSave = document.getElementById("inputTextToSave").value;
            var textToSave = '<!DOCTYPE html>'
            textToSave += '\n<html>\n<head>\n<link rel="stylesheet" href="../css/tab.css">'
            textToSave += '\n<script type="text/javascript" src="../js/header.js">' + '<' + '/script' + '>'  
            textToSave += '\n</head>'
            textToSave += '\n</body>'
                   
           
            textToSave += '\n<div class="tab">'
            for (i = 1; i <= intTextBox; i++) {
                if (i == 1) {                  
                  textToSave += '\n<button class="tablinks" onclick="openTab(event, \'tab1\')" id="defaultOpen">' + tb_1.value + '</button>'                  
                }
              else {
                  var tb = document.getElementById('tb_' + i).value                        
                   textToSave += '\n<button class="tablinks" onclick="openTab(event,  \'tab' + i + "'" + ')">' + tb + '</button>'
                }
           }

           textToSave += '\n</div>'
           for (i = 1; i <= intTextBox; i++) {
               if (i != 2) {
                   textToSave += '\n<div id="tab' + i + '" class="tabcontent">'
               }
               else {
                   textToSave += '\n<div id="tab' + i + '" class="tabcontent" style="display:none">'
               }
               textToSave += '\n<iframe src="tab' + i + '.html" width="100%" height="100%" frameborder=0>'

               textToSave += '\n<p>Your browser does not support iframes.</p>'
               textToSave += '\n</iframe>'
               textToSave += '\n</div>'
           }

           textToSave += '\n<script src="../js/tab.js">' + '<' + '/script' + '>'

           textToSave += '\n' + '<' + '/body' + '>'
           textToSave += '\n' + '<' + '/html' + '>'          
                                                            

            var textToSaveAsBlob = new Blob([textToSave], { type: "text/html" });
            var textToSaveAsURL = window.URL.createObjectURL(textToSaveAsBlob);
            // var fileNameToSaveAs = document.getElementById("inputFileNameToSaveAs").value;
            var fileNameToSaveAs = '01.html'

            if (window.navigator && window.navigator.msSaveOrOpenBlob) {
                window.navigator.msSaveOrOpenBlob(textToSaveAsBlob, fileNameToSaveAs);
            } else {

                var downloadLink = document.createElement("a");
                downloadLink.download = fileNameToSaveAs;
                downloadLink.innerHTML = "Download File";
                downloadLink.href = textToSaveAsURL;
                downloadLink.onclick = destroyClickedElement;
                downloadLink.style.display = "none";
                document.body.appendChild(downloadLink);

               downloadLink.click();
              // downloadLink.onclick();
            }
        }

        function destroyClickedElement(event) {
            document.body.removeChild(event.target);
        } 
              
    
    </script>
</head>
<body>
    <table width="40%" align="center" border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td width="30%">
                <!--Number Of Tabs:-->
            </td>
            <td width="50%" colspan="2">
               <!-- <input type="text" id="member" name="member" value="" />-->
               
            </td>
            <td width="20%">
                <!--<a href="#" id="filldetails" onclick="addFields()">Add</a>-->
            </td>
        </tr>
        <tr>
            <td colspan="3">
                                  
            <a href="javascript:void(0);" onclick="addElement();">Add Tab Name</a> &nbsp;&nbsp;
            <a href="javascript:void(0);" onclick="removeElement();">Remove Tab Name</a><br /><br />
                

             <b>Tab names: </b><br />
            <div id="content"></div>
            </td>
        </tr>
        <tr><td height="20"></td></tr>

       <tr><td>  <button onclick="generatefile()"><b>Generate File</b></button> </td></tr>


    </table>
    
</body>
</html>
